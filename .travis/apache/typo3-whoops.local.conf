<VirtualHost *:80>
    ServerName localhost
    ServerAlias typo3-whoops.local

    DocumentRoot %TRAVIS_BUILD_DIR%/.build/web
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>
    <Directory /usr/lib/cgi-bin>
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order deny,allow
        Allow from all
    </Directory>
    <Directory "%TRAVIS_BUILD_DIR%/.build/web/">
        Options FollowSymLinks Indexes MultiViews
        AllowOverride All
        Order deny,allow
        Allow from all
    </Directory>

    <IfModule mod_fastcgi.c>
        <FilesMatch "\.php[\d]?$">
            SetHandler php-fpm
        </FilesMatch>
        Action php-fpm /php-fpm
        Alias /php-fpm /usr/lib/cgi-bin/php-fpm
        FastCgiExternalServer /usr/lib/cgi-bin/php-fpm -host 127.0.0.1:9000 -pass-header Authorization
    </IfModule>

    ErrorLog "%TRAVIS_BUILD_DIR%/apache-error.log"

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog "%TRAVIS_BUILD_DIR%/apache-access.log" combined
</VirtualHost>